<div class="users-list-container">
  <!-- Header -->
  <div class="page-header">
    <h1>User Management</h1>
    <p class="subtitle">View and manage all system users</p>
  </div>

  <!-- Filters -->
  <div class="filters-section">
    <!-- Search -->
    <div class="search-box">
      <input
        type="text"
        [(ngModel)]="searchTerm"
        (ngModelChange)="onSearchChange()"
        placeholder="Search by name or email..."
        class="search-input"
      />
    </div>

    <!-- Role Filter -->
    <div class="filter-group">
      <label>Role:</label>
      <select [(ngModel)]="roleFilter" (ngModelChange)="onRoleFilterChange($event)" class="filter-select">
        <option value="all">All Roles</option>
        <option value="patient">Patients</option>
        <option value="doctor">Doctors</option>
        <option value="administrator">Admins</option>
      </select>
    </div>

    <!-- Status Filter -->
    <div class="filter-group">
      <label>Status:</label>
      <select [(ngModel)]="statusFilter" (ngModelChange)="onStatusFilterChange($event)" class="filter-select">
        <option value="all">All Status</option>
        <option value="active">Active</option>
        <option value="inactive">Inactive</option>
      </select>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p>Loading users...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="error-message">
    <p>{{ error }}</p>
  </div>

  <!-- Users Table -->
  <div *ngIf="!loading && !error" class="users-table-container">
    <table class="users-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Role</th>
          <th>Status</th>
          <th>Created</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of filteredUsers">
          <td>{{ user.firstName }} {{ user.lastName }}</td>
          <td>{{ user.email }}</td>
          <td>
            <span class="badge" [ngClass]="getRoleBadgeClass(user.role)">
              {{ user.role }}
            </span>
          </td>
          <td>
            <span class="badge" [ngClass]="getStatusBadgeClass(user.isActive)">
              {{ user.isActive ? 'Active' : 'Inactive' }}
            </span>
          </td>
          <td>{{ user.createdAt | date: 'MMM d, y' }}</td>
          <td>
            <button
              class="btn-toggle"
              [class.btn-deactivate]="user.isActive"
              [class.btn-activate]="!user.isActive"
              (click)="toggleUserStatus(user.id)">
              {{ user.isActive ? 'Deactivate' : 'Activate' }}
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Empty State -->
    <div *ngIf="filteredUsers.length === 0" class="empty-state">
      <p>No users found matching your criteria</p>
    </div>
  </div>
</div>
